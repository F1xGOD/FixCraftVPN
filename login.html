<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" href="password.css">
	<link rel="icon" href="https://x0.at/3oJC.png">
	<link rel="stylesheet" href="snackbar.css">
	</script>
	<title>Login to FixCraft</title>
</head>
<body>
	<script src="snackbar.js"></script>
	<script src="jquery.js"></script>
	<script src="setup.js"></script>
	<div class="container" id="container">
		<div class="form-container log-in-container">
			<form action="#">
				<h1>Login</h1>
				<input type="email" id="username" placeholder="Username" />
				<input type="password" id="password" placeholder="Password" />
				<a href="/unknown">Forgot Your Password?</a>
				<button type="button" onclick="checkSuccess();">Log In</button>
			</form>
		</div>
		<div class="overlay-container">
			<div class="overlay">
				<div class="overlay-panel overlay-right">
					<h1>Login In FixCraft</h1>
					<p>Keep In mind that shairing passwords is illegal!</p>
				</div>
			</div>
		</div>
	</div>
<script>
	
	 function setCookie(cname,cvalue,exdays) {
          const d = new Date();
          d.setTime(d.getTime() + (exdays*24*60*60*1000));
          let expires = "expires=" + d.toUTCString();
          document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
        }

        function getCookie(cname) {
          let name = cname + "=";
          let decodedCookie = decodeURIComponent(document.cookie);
          let ca = decodedCookie.split(';');
          for(let i = 0; i < ca.length; i++) {
            let c = ca[i];
            while (c.charAt(0) == ' ') {
              c = c.substring(1);
            }
            if (c.indexOf(name) == 0) {
              return c.substring(name.length, c.length);
            }
          }
          return "";
        }
        function checkCookie() {
          let pass = getCookie("passwordstate");
          if (pass === "passed") {
            console.log("Session Login")    
          } else {
            window.location.replace('https://fixcraftvpn.onrender.com/')             
      }
    }
	var snackbar_Success = function () {
                        SnackBar({
                            message: "Logged In Successfully!",
                            status: "success"
                        });
                    };
	var snackbar_Fail = function () {
                        SnackBar({
                            message: "Login Failed!",
                            status: "danger"
                        });
                    };
	var snackbar_Fail2 = function () {
                        SnackBar({
                            message: "Please Enter Credentials!",
                            status: "danger"
                        });
                    };
	function checkSuccess(){
		var text = document.getElementById("password").value
		var text2 = document.getElementById("username").value
		if(text==""||text2==""){snackbar_Fail2();}else{
		$.getJSON(`https://networkcalc.com/api/encoder/${text}?encoding=base64`,
            	function (data) {
			$.getJSON(`https://networkcalc.com/api/encoder/${text2}?encoding=base64`,
            		function (data2) {
				        var success = false
				        var accounts = actdata.accounts
					var enc = data.encoded
					var enc2 = data2.encoded
					console.log(enc)
					console.log(enc2)
					console.log(accounts)
					let i = 0;
					while (i < actdata.length) {
					console.log(actdata[i]);
					if(actdata[i].username==enc2,actdata[i].password==enc)
					success = true
					i++;
					}
					if(success===true){
						snackbar_Success();
					}else {
						snackbar_Fail();
					}}    
  )})}}
	</script>	
</body>
</html>
