<!DOCTYPE html>
<html>
<head>
<title>ADMIN SETTINGS</title>
  <script src="/host.js"></script>
  <script src="/jquery.js"></script>
  <script src="/setup.js"></script>
  <script src="/password.js"></script>
<link rel="icon" href="https://x0.at/CVDX.png">
</head>
<body>
<div id="log">LOADING...</div>
<script>
function checkREADY22(){
if(JSON.stringify(actdata)=="{}"){
  setTimeout(function(){
   console.log(actdata)
  checkREADY22()}, 100)
}else{console.log("LOADED!")
document.getElementById('log').innerHTML = `INITIALIZING...`
var uname = getCookie("usernamecred");
var ii2i= 0;
var role = ""
while (ii2i < actdata.length){
	if(actdata.accounts[ii2i].username==uname){
		role=actdata.accounts[ii2i].role
	}
}
if(role=="admin" || role=="moderator"){
	var accountsm = actdata.accounts
	Object.freeze(accountsm)
	var final = ``
	final = `STATUS: ${actdata.status}<br>`
	final += `LOGIN ATTEMPTS: ${actdata.tries}<br>`
	final += `ACCOUNTS: <br>`
	var accountsm = actdata.accounts
	Object.freeze(accountsm)
for (var i = 0; i < accountsm.length; i++) {
    (function(i) { // protects i in an immediately called function
      $.getJSON(`https://networkcalc.com/api/encoder/${accountsm[i].username}?encoding=base64&decode=true`, function (data) {
      $.getJSON(`https://networkcalc.com/api/encoder/${accountsm[i].password}?encoding=base64&decode=true`, function (data2) {
        						final += `USERNAME: ${data.decoded}, PASSWORD: ${data2.decoded}, ROLE: ${accountsm[i].role}, STATUS: ${accountsm[i].status}, JOB: ${accountsm[i].job}<br>`
                    if(i==accountsm.length-1){
			    	final+=`TOTAL ${accountsm.length} ACCOUNTS`
        			document.getElementById('log').innerHTML = final
      }
      })});
    })(i);
}
}else{
  window.location.replace(`${host}/forbidden`);
}}}
</script>
</body>
</html>
